<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Guide – Monastery360</title>
<style>
  body {
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:#faf7f2; color:#333; text-align:center; margin:0; padding:0;
  }
  header {
    background:#7c2d12; color:white; padding:20px 0;
    font-size:1.5rem; font-weight:bold;
  }
  main { padding:40px 20px; max-width:800px; margin:auto; }
  button {
    background:#7c2d12; color:white; border:none; padding:15px 30px;
    font-size:1.1rem; border-radius:30px; cursor:pointer; margin-top:20px;
    transition:background 0.3s;
  }
  button:hover { background:#b45309; }
  p { font-size:1.1rem; margin-top:20px; }
</style>
</head>
<body>

<header>Monastery360 – Audio Guide</header>

<main>
  <h2>Welcome to the Audio Guide</h2>
  <p>We will play audio for the nearest monastery based on your current location.</p>
  <button id="playAudioBtn">Allow Location & Play Audio</button>
  <p id="status"></p>
</main>

<script>
const monasteries = [
  {name: "Rumtek Dharma Chakra Centre", coords: [88.5614622, 27.2886861], audio: "audio/rumtek_dharma_chakra_centre.mp3"},
  {name: "Mamring Monastery", coords: [88.3101201, 27.277364], audio: "audio/mamring_monastery.mp3"},
  {name: "Enchey Monastery", coords: [88.6191659, 27.3359368], audio: "audio/enchey_monastery.mp3"},
  {name: "Burtuk", coords: [88.6158468, 27.3539598], audio: "audio/burtuk.mp3"},
  {name: "Do Drul Chorten", coords: [88.6048366, 27.3128415], audio: "audio/do_drul_chorten.mp3"},
  {name: "Decchen Cholling Gumpa-Tamamg Gumpa", coords: [88.608536, 27.338795], audio: "audio/decchen_cholling_gumpa_tamamg_gumpa.mp3"},
  {name: "Bermiok Tokal Monastery", coords: [88.4690827, 27.2287152], audio: "audio/bermiok_tokal_monastery.mp3"},
  {name: "Tashiding Monastery", coords: [88.2978746, 27.3089308], audio: "audio/tashiding_monastery.mp3"},
  {name: "Sinon Monastery", coords: [88.2900301, 27.3423753], audio: "audio/sinon_monastery.mp3"},
  {name: "Kartok Monastery", coords: [88.588005, 27.2407996], audio: "audio/kartok_monastery.mp3"},
  {name: "Sanghak Choeling Monastery", coords: [88.2216867, 27.2977517], audio: "audio/sanghak_choeling_monastery.mp3"},
  {name: "Pema Choling Monastery", coords: [88.5310593, 27.1757119], audio: "audio/pema_choling_monastery.mp3"},
  {name: "Pal Karma Zurmang Shedup Chokhor Ling Lingdum Monastery (Ranka Monastery)", coords: [88.5790387, 27.3311957], audio: "audio/pal_karma_zurmang_shedup_chokhor_ling_lingdum_monastery.mp3"},
  {name: "Lingdum Zurmang Kagyu Monastery", coords: [88.5805594, 27.3307583], audio: "audio/lingdum_zurmang_kagyu_monastery.mp3"},
  {name: "Rinchenpong Monastery", coords: [88.2684733, 27.2354672], audio: "audio/rinchenpong_monastery.mp3"},
  {name: "Rinchen Choling Tamu Monastery/ Gurung Gompha", coords: [88.2708814, 27.2432459], audio: "audio/rinchen_choling_tamu_monastery_gurung_gompha.mp3"},
  {name: "Pemayangtse Monastery", coords: [88.2515852, 27.3052201], audio: "audio/pemayangtse_monastery.mp3"},
  {name: "Okhrey Monastery", coords: [88.1019019, 27.149513], audio: "audio/okhrey_monastery.mp3"},
  {name: "Khecheopalri Monastery", coords: [88.1882768, 27.349221], audio: "audio/khecheopalri_monastery.mp3"},
  {name: "Hung hri Monastery", coords: [88.2535011, 27.3523006], audio: "audio/hung_hri_monastery.mp3"},
  {name: "Dubdi Buddhist Monastery - Yuksom", coords: [88.2299922, 27.3665529], audio: "audio/dubdi_buddhist_monastery_yuksom.mp3"},
  {name: "Dodak Buddhist Monastery", coords: [88.1715435, 27.1718352], audio: "audio/dodak_buddhist_monastery.mp3"},
  {name: "Tendong Gumpa", coords: [88.4079885, 27.2061039], audio: "audio/tendong_gumpa.mp3"},
  {name: "Chang Chu Monastery", coords: [88.4032499, 27.2959417], audio: "audio/chang_chu_monastery.mp3"},
  {name: "Serdup Choling Monastery", coords: [88.3547474, 27.161498], audio: "audio/serdup_choling_monastery.mp3"},
  {name: "Sharchhog Bayphug", coords: [88.385782, 27.2763652], audio: "audio/sharchhog_bayphug.mp3"},
  {name: "Ralang New Monastery", coords: [88.3352477, 27.3284964], audio: "audio/ralang_new_monastery.mp3"},
  {name: "Mane Choekhorling Gompa (Ravangla Monastery)", coords: [88.518887, 28.240229], audio: "audio/mane_choekhorling_gompa_ravangla_monastery.mp3"},
  {name: "Ngadak Thupten Shedup Dhargey Choeling, Monastery", coords: [88.3706278, 27.1732407], audio: "audio/ngadak_thupten_shedup_dhargey_choeling_monastery.mp3"},
  {name: "Norbu Yangdup Choling Monastery", coords: [88.3773796, 27.2345473], audio: "audio/norbu_yangdup_choling_monastery.mp3"},
  {name: "Phagyal monastery Lingee", coords: [88.4592622, 27.37048], audio: "audio/phagyal_monastery_lingee.mp3"},
  {name: "Kewzing Monastery", coords: [88.3227697, 27.2842636], audio: "audio/kewzing_monastery.mp3"},
  {name: "Doling Monastery", coords: [88.3449117, 27.287967], audio: "audio/doling_monastery.mp3"},
  {name: "Norbu gang, Coronation throne of Namgyal Dynasty", coords: [88.2173761, 27.3694863], audio: "audio/norbu_gang_coronation_throne_of_namgyal_dynasty.mp3"},
  {name: "Bon Monastery", coords: [88.3343804, 27.278643], audio: "audio/bon_monastery.mp3"},
  {name: "Chawayng Ani Monastery", coords: [88.5122178, 27.5329718], audio: "audio/chawayng_ani_monastery.mp3"},
  {name: "Tholung Monastery", coords: [88.4615734, 27.636972], audio: "audio/tholung_monastery.mp3"},
  {name: "Tingvong Monastery", coords: [88.4767615, 27.5568019], audio: "audio/tingvong_monastery.mp3"},
  {name: "Tashi Gyan Palden Monastery", coords: [88.4127344, 27.2866497], audio: "audio/tashi_gyan_palden_monastery.mp3"},
  {name: "Ringhem Monastery", coords: [88.5462414, 27.4953153], audio: "audio/ringhem_monastery.mp3"},
  {name: "Phodong Monastery", coords: [88.5838205, 27.4128715], audio: "audio/phodong_monastery.mp3"},
  {name: "Phensang Monastery", coords: [88.6101296, 27.420723], audio: "audio/phensang_monastery.mp3"},
  {name: "Lingthem Rikzing Chopel Targelling Monastery", coords: [88.5011052, 27.5230064], audio: "audio/lingthem_rikzing_chopel_targelling_monastery.mp3"},
  {name: "Lachung Monastery", coords: [88.7487553, 27.6886827], audio: "audio/lachung_monastery.mp3"},
  {name: "Lachen Monastery", coords: [88.5577391, 27.7166667], audio: "audio/lachen_monastery.mp3"},
  {name: "Labrang Monastery", coords: [88.5794589, 27.4180001], audio: "audio/labrang_monastery.mp3"},
  {name: "KABI MONASTERY", coords: [88.6099182, 27.4007368], audio: "audio/kabi_monastery.mp3"},
  {name: "HEE GYATHANG MONASTERY", coords: [88.501073, 27.4758646], audio: "audio/hee_gyathang_monastery.mp3"},
  {name: "Simik Monastery", coords: [88.4718882, 27.2873094], audio: "audio/simik_monastery.mp3"},
  {name: "Rhenock Gumpa, Monastery", coords: [88.6779745, 27.1842602], audio: "audio/rhenock_gumpa_monastery.mp3"},
  {name: "Tsuglakhang Monastery & Temple", coords: [88.6147222, 27.3261111], audio: "audio/tsuglakhang_monastery_temple.mp3"},
  {name: "Gonjang Monastery", coords: [88.6132007, 27.3690385], audio: "audio/gonjang_monastery.mp3"},
  {name: "Singtam Monastery", coords: [88.5035101, 27.2341097], audio: "audio/singtam_monastery.mp3"},
  {name: "Mintokgang Road", coords: [88.6176397, 27.3332951], audio: "audio/mintokgang_road.mp3"},
  {name: "Pabyuik Monastery", coords: [88.6279545, 27.2993719], audio: "audio/pabyuik_monastery.mp3"},
  {name: "Old Rumtek Monastery", coords: [88.563264, 27.2846735], audio: "audio/old_rumtek_monastery.mp3"}
];


function getDistance(lat1, lon1, lat2, lon2) {
  const R = 6371;
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLon = (lon2 - lon1) * Math.PI / 180;
  const a = Math.sin(dLat/2)**2 +
            Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) * Math.sin(dLon/2)**2;
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
}

function nearestMonastery(userLat, userLon) {
  let nearest = monasteries[0];
  let minDist = getDistance(userLat, userLon, nearest.coords[0], nearest.coords[1]);
  monasteries.forEach(m => {
    const dist = getDistance(userLat, userLon, m.coords[0], m.coords[1]);
    if(dist < minDist) {
      nearest = m;
      minDist = dist;
    }
  });
  return nearest;
}

function playAudio(audioFile) {
  const audio = new Audio(audioFile);
  audio.play();
}

document.getElementById("playAudioBtn").addEventListener("click", () => {
  const statusEl = document.getElementById("status");
  if (navigator.geolocation) {
    statusEl.textContent = "Accessing your location...";
    navigator.geolocation.getCurrentPosition(position => {
      const userLat = position.coords.latitude;
      const userLon = position.coords.longitude;
      const nearest = nearestMonastery(userLat, userLon);
      statusEl.textContent = `Playing audio guide for: ${nearest.name}`;
      playAudio(nearest.audio);
    }, () => {
      statusEl.textContent = "Cannot access your location. Please allow location access.";
    });
  } else {
    statusEl.textContent = "Geolocation is not supported by your browser.";
  }
});
</script>

</body>
</html>
